# 计算机数据的存储

大家都知道计算机是二进制的，本质上所有的数据都是以0、1的形式保存在磁盘上，但是实际应用中，不同类型的文件还是略有差异的，今天咱就来聊聊！

### 1.文件后缀
文件后缀又被称为文件扩展名，也就是平时我们看到的 **.mp3、.mp4、.jpg、.txt**..., 这个其实并没有什么大的作用，它并不能代表一个文件的实际类型。

它是给用户看的，比如说大家看到jpg文件默认就会认为这是一个图片，双击就会使用图片查看器打开。计算机很多应用都是根据文件后缀名关联应用，比如说txt文件默认会使用文本编辑器打开，当然你也可以使用图片查看器打开...

一个文件的实际类型并不是由它的后缀名决定的，本质上是由文件的头信息部分决定的，而且还和文件里面格式有关。所谓格式其实就是一种标准，就像TCP/IP协议一样，大家都遵循一个标准去存放文件，就可以用这个标准读取。

简单的说，图片和文本文件的区别就在于里面的0和1的排列方式不一样。

### 2.文本文件
一般说文本文件可能大家会以为是txt文件，其实很多文件都是文本文件，比如编程里面的.jsp .php .go .js 其实都算文本，它们的后缀名只是为了方便应用程序使用。

文本文件是最纯粹的，格式非常简单，说到文本就得说说编码格式，最早的**ASCII**码只定义128个字符,到后来的Unicode编码方式可以囊括所谓世界上所有文字。

无论什么编码，什么文字，本质上都是使用01表示的，比如说对于英文字母一个字节，也就是8位，也就是8个0或1就可以表示。对于中文，大部分需要2个字节，也就16个0或1表示。

下面我们就来看看一个文本文件：

一. 我们使用vim编辑一个**demo.txt**文件，写入 “123 我是文本 text file”(不包括双引号)，保存！

大家需要注意的是，现代电脑大部分都是以utf8的编码格式保存文本文件，以前很多老电脑还喜欢用gb2132或者gbk，这2种编码方式以前用的多，我猜是因为那时候硬盘、流量比较贵吧！

这2种编码方式占的存储空间比utf8小，我记得小时候很多政府的办公系统存不了一些生僻的姓名，我猜是因为当时使用的编码格式里面并没那个字，所以打不出来，而现在的系统大多都是使用utf8编码，无论什么字都能存的下了。

二. ```xxd -b demo.txt``` xxd是Linux下面一个编码转换的命令,可以看见内容如下：
```
00000000: 00110001 00110010 00110011 00100000 11100110 10001000  123 ..
00000006: 10010001 11100110 10011000 10101111 11100110 10010110  ......
0000000c: 10000111 11100110 10011100 10101100 00100000 01110100  .... t
00000012: 01100101 01111000 01110100 00100000 01100110 01101001  ext fi
00000018: 01101100 01100101 00001010
```
结果分为3部分，第一列是一个字节序号下标。第二列是二进制数据。第三列是ASCII码的结果，ASCII码只包括英文和数字，所以中文并没有显示出来。

从大小上看，这个文件有27个字节，大家需要注意第一列的字节数是16进制，在上面的例子里面，18转换成10进制就是24，然后后面还有3个，刚好是27个字节。

有人说第一个字节一看就是不对，1不应该是 00000001 吗？其实不是这样的，咱们来看一张图:
![](http://ww1.sinaimg.cn/large/5f6e3e27ly1fzjt8qyveoj20hy0mhdi1.jpg)

这是ASCII里面**可显示字符**的进制对照表，用10进制看，也就是从32开到126之间的字符，初此之外的33个字符都是控制字符，有其它用途，无法在屏幕里面显示。

其中有一栏图形，大家可以看到其中**图形为1**的字符对应的二进制刚好是00110001。这意味着我们在计算机上面能看到的都是图形字符，并不是实际计算机里面存储的0和1。

大家可以对照这张表看看，其中中文的话这里没有显示出来，但是我们可以看出来00100000是空格，那就意味着“我是文本”占了17个字符，这是咋算的呢？

utf8是可变长编码方式，它不等于Unicode，简单说就是在utf8编码下，有些字符占1个字节，有的占4个字节，有的占4个字节...这里没有对照表，所以咱就不细讲了！

总体来说，文本存储的还是比较简单的，但需注意的是不同编码方式之间的区别！